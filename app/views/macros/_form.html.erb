
<% form.inputs do  -%>
<%= form.input :name %>
<%= form.inputs :number_of_frames, :columns, :thumb_width, :thumb_height, :thumb_quality %>
<%= form.input :thumb_frame, :as => :boolean %>
<%= form.input :frame_size %>
<%= form.input :frame_color, :input_html => {:class => "color_field" } %>
<%= form.input :thumb_shadow, :as => :boolean %>
<%= form.input :thumb_padding %>
<%= form.inputs :font, :font_size %>
<%= form.input :font_color,  :input_html => {:class => "color_field" } %>
<%= form.input :template_background,  :input_html => {:class => "color_field" } %>
<%= form.input :header_text %>
<%= form.input :add_timestamp, :as => :boolean %>
<%= form.input :position_timestamp, :as => :select, :collection => Common::PositionTimestamp::options_for_select %>
<%= form.input :add_logo, :as => :boolean %>
<%= form.input :logo, :as => :select, :collection => @logos.map{|x| [x.title, x.id]}   %>
<%= form.input :file_format, :as => :select, :collection => Common::FileFormat::options_for_select, :include_blank => false  %>
<% end -%>

<script type="text/javascript" charset="utf-8">
  $(function(){
    $.each($("input.color_field"),function(i,item){
      $(item).css({'background-color': '#'+$(item).val()});
     });

    $("input.color_field").ColorPicker({
	          onSubmit: function(hsb, hex, rgb, el) {
		                   $(el).val(hex);
                       $(el).css({'background-color': '#'+hex});
              	       $(el).ColorPickerHide();
                  	 },
       	onBeforeShow: function () {
		                   $(this).ColorPickerSetColor(this.value);
	                   }
        })
       .bind('keyup', function(){
          	$(this).ColorPickerSetColor(this.value);
        });

     var list_toggle_element = [
          {      "toggle_el": "#macro_thumb_frame",
            "change_element": "#macro_frame_size_input, #macro_frame_color_input" },
          {      "toggle_el": "#macro_add_timestamp",
            "change_element": "#macro_position_timestamp_input" },
          {      "toggle_el": "#macro_add_logo",
            "change_element": "#macro_logo_input" }]

     $.each(list_toggle_element, function(i, item){

       if (!$(item["toggle_el"]).attr("checked")) {
            $(item["change_element"]).hide(); };

        $(item["toggle_el"]).click(function(){
           if ($(this).attr("checked")) {
               $(item["change_element"]).show();
           } else {
               $(item["change_element"]).hide().find("input,select").val(''); };
        })


      });
  });
</script>
